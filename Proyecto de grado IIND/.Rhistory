library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
datos_poligonos <- st_buffer(st_as_sf(bog$geometry), 0)
datos_poligonos <- st_as_sf(datos_poligonos)
View(datos_poligonos)
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
datos_poligonos <- st_buffer(st_as_sf(bog$geometry), 0)
View(datos_poligonos)
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
## obtener la caja de coordenada que contiene el polígono de Bogotá
opq(bbox = getbb("Bogotá Colombia"))
## objeto osm
osm = opq(bbox = getbb("Bogotá Colombia")) %>%
add_osm_feature(key="amenity" , value="Estaciones")
class(osm)
## extraer Simple Features Collection
osm_sf = osm %>% osmdata_sf()
osm_sf
## Obtener un objeto sf
bus_station = osm_sf$osm_points %>% select(osm_id,amenity)
bus_station
class(osm)
## extraer Simple Features Collection
osm_sf = osm %>% osmdata_sf()
osm_sf
## Obtener un objeto sf
bus_station = osm_sf$osm_points %>% select(valor,amenity)
View(osm)
View(osm_sf)
bus_station
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("10. Mapa_aqli_PM25.xlsx")
world_coordinates <- map_data("world")
world_coordinates <- map_data("world")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm2021), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial",
subtitle = "Año 2021",
x = "Longitud",
y = "Latitud",
caption = "Datos de AQLI Chicago") +
scale_fill_continuous(type = "viridis")
aqli_jorge <- import("10. Mapa_aqli_PM25.xlsx")
world_coordinates <- map_data("world")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm2021), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial",
subtitle = "Año 2021",
x = "Longitud",
y = "Latitud",
caption = "Datos de AQLI Chicago") +
scale_fill_continuous(type = "viridis")
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
aqli_jorge <- import("10. Mapa_aqli_PM25.xlsx")
world_coordinates <- map_data("world")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm2021), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial",
subtitle = "Año 2021",
x = "Longitud",
y = "Latitud",
caption = "Datos de AQLI Chicago") +
scale_fill_continuous(type = "viridis")
View(world_coordinates)
world_coordinates <- map_data("world")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm2021), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial",
subtitle = "Año 2021",
x = "Longitud",
y = "Latitud",
caption = "Datos de AQLI Chicago") +
scale_fill_continuous(type = "viridis")
world_coordinates <- map_data("world")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial",
subtitle = "Año 2021",
x = "Longitud",
y = "Latitud",
caption = "Datos de AQLI Chicago") +
scale_fill_continuous(type = "viridis")
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
aqli_jorge <- import("10. Mapa_aqli_PM25.xlsx")
world_coordinates <- map_data("world")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial",
subtitle = "Año 2021",
x = "Longitud",
y = "Latitud",
caption = "Datos de AQLI Chicago") +
scale_fill_continuous(type = "viridis")
View(world_coordinates)
library(writexl)
write_xlsx(world_coordinates, "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos/12. world_coordinates.xlsx")
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
aqli_jorge <- import("10. Mapa_aqli_PM25.xlsx")
world_coordinates <- map_data("world")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial",
subtitle = "Año 2021",
x = "Longitud",
y = "Latitud",
caption = "Datos de AQLI Chicago") +
scale_fill_continuous(type = "viridis")
world_coordinates <- map_data("world")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial - 2023",
x = "Longitud",
y = "Latitud",
caption = "Datos de Word Air Quality Report") +
scale_color_gradient(low="blue", high="red")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial - 2023",
x = "Longitud",
y = "Latitud",
caption = "Datos de Word Air Quality Report") +
scale_color_gradient2(midpoint=mid, low="blue", mid="white",
high="red", space ="Lab" )
mid<-mean(aqli_jorge$pm25)
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial - 2023",
x = "Longitud",
y = "Latitud",
caption = "Datos de Word Air Quality Report") +
scale_color_gradient2(midpoint=mid, low="blue", mid="white",
high="red", space ="Lab" )
mid<-mean(aqli_jorge$pm25)
View(aqli_jorge)
str(aqli_jorge)
world_coordinates <- map_data("world")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial - 2023",
x = "Longitud",
y = "Latitud",
caption = "Datos de Word Air Quality Report") +
scale_fill_continuous(type = "viridis")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial - 2023",
x = "Longitud",
y = "Latitud",
caption = "Datos de Word Air Quality Report") +
scale_fill_continuous(type = "viridis") +
theme(
plot.title = element_text(hjust = 0.5, size = 16, face = "bold"),  # Centra y ajusta el título
axis.title = element_text(size = 14),  # Ajusta el tamaño de las etiquetas de los ejes
axis.text = element_text(size = 12),   # Ajusta el tamaño del texto de los ejes
plot.background = element_rect(fill = "white"),  # Cambia el fondo del gráfico
panel.grid.minor = element_blank()  # Elimina las líneas de cuadrícula menores
)
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de Material Particulado 2.5 Mundial - 2023",
x = "Longitud",
y = "Latitud",
caption = "Datos de Word Air Quality Report") +
scale_fill_continuous(type = "viridis") +
theme(
plot.title = element_text(hjust = 0.5, size = 16, face = "bold"),  # Centra y ajusta el título
axis.title = element_text(size = 14),  # Ajusta el tamaño de las etiquetas de los ejes
axis.text = element_text(size = 12),   # Ajusta el tamaño del texto de los ejes
)
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa de PM2.5 Mundial - 2023",
x = "Longitud",
y = "Latitud",
caption = "Datos de Word Air Quality Report") +
scale_fill_continuous(type = "viridis") +
theme(
plot.title = element_text(hjust = 0.5, size = 16, face = "bold"),  # Centra y ajusta el título
axis.title = element_text(size = 14),  # Ajusta el tamaño de las etiquetas de los ejes
axis.text = element_text(size = 12),   # Ajusta el tamaño del texto de los ejes
)
# Mapa World con Aqli más bonito y con colores
ggplot(aqli_jorge) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa Global de Concentraciones de PM2.5 - 2023",
x = "Longitud",
y = "Latitud",
caption = "Datos de Word Air Quality Report") +
scale_fill_continuous(type = "viridis") +
theme(
plot.title = element_text(hjust = 0.5, size = 16, face = "bold"),  # Centra y ajusta el título
axis.title = element_text(size = 14),  # Ajusta el tamaño de las etiquetas de los ejes
axis.text = element_text(size = 12),   # Ajusta el tamaño del texto de los ejes
)
aqli <- import("10. Mapa_aqli_PM25.xlsx")
world_coordinates <- map_data("world")
# Mapa World con Aqli más bonito y con colores
ggplot(aqli) +
geom_map(data = world_coordinates, map = world_coordinates,
aes(map_id = region)) +
geom_map(map=world_coordinates,
aes(map_id=name, fill=pm25), color="black") +
expand_limits(x = world_coordinates$long, y = world_coordinates$lat) +
labs(title = "Mapa Global de Concentraciones de PM2.5 - 2023",
x = "Longitud",
y = "Latitud",
caption = "Datos de Word Air Quality Report") +
scale_fill_continuous(type = "viridis") +
theme(
plot.title = element_text(hjust = 0.5, size = 16, face = "bold"),  # Centra y ajusta el título
axis.title = element_text(size = 14),  # Ajusta el tamaño de las etiquetas de los ejes
axis.text = element_text(size = 12),   # Ajusta el tamaño del texto de los ejes
)
# Exportar como PNG
ggsave("32. Mapa Global de Concentraciones de PM2.5 - 2023.png",
plot = last_plot(),
path = "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/4. Gráficos",
width = 10, height = 6, units = "in", dpi = 300)
