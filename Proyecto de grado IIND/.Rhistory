library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
bog$geometry1 <- st_as_sf(bog$geometry)
View(bog)
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
bog$geometry1 <- st_buffer(st_as_sf(bog$geometry), 0)
View(bog)
st_geometry_type(datos_poligonos)
p <- ggplot(data = bog) +
geom_sf()
print(p)
if (!inherits(bog, "sf")) {
bog <- st_as_sf(bog)
}
head(bog)
head(bog)
str(bog)
st_geometry(bog) <- bog$geometry1
st_geometry(bog) <- bog$geometry1
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
bog$a <- st_buffer(st_as_sf(bog$geometry), 0)
View(bog)
View(db)
bog <- bog %>% rename(geometry = lat)
View(bog)
st_geometry(bog) <- bog$geometry1
p = ggplot(data=bog) + geom_sf(mapping = aes(fill=valor) , size=0.3 , col=NA)  +
scale_fill_manual(values=c("yellow","#FF9900","#FF6600","#CC0000","#990000"),
name="Valor mediano\n del metro cuadrado")
p
bog <- bog %>% rename(a = geometry)
View(bog[[3]][[1]])
datos_poligonos <- st_buffer(st_as_sf(bog$geometry), 0)
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
datos_poligonos <- st_buffer(st_as_sf(bog$geometry), 0)
st_geometry_type(datos_poligonos)
View(datos_poligonos)
datos_actualizados <- datos_poligonos %>%
left_join(bog, by = "valor") %>%
datos_actualizados <- datos_poligonos %>%
left_join(bog, by = "valor") %>%
select(-id)
View(datos_poligonos)
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
datos_poligonos <- st_buffer(st_as_sf(bog$geometry), 0)
datos_actualizados <- datos_poligonos %>%
left_join(bog, by = "valor") %>%
select(-id)
datos_actualizados <- datos_poligonos %>%
left_join(bog, by = "id") %>%
select(-id)
datos_actualizados <- datos_poligonos %>%
left_join(bog, by = "valor") %>%
select(-valor)
# Convertir 'datos_poligonos' a sf si aún no lo es
datos_poligonos <- st_as_sf(datos_poligonos)
# Ejemplo de unión por columna 'id'
datos_actualizados <- st_join(datos_poligonos, bog, by = "id") %>%
st_drop_geometry()  # Eliminar la geometría adicional de 'bog', si es necesario
# Guardar el resultado en una nueva variable o sobrescribir 'datos_poligonos' si deseas actualizarlo directamente
datos_poligonos <- datos_actualizados
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
datos_poligonos <- st_buffer(st_as_sf(bog$geometry), 0)
# Convertir 'datos_poligonos' a sf si aún no lo es
datos_poligonos <- st_as_sf(datos_poligonos)
View(datos_poligonos)
# Ejemplo de unión por columna 'id'
datos_actualizados <- st_join(datos_poligonos, bog, by = "id") %>%
st_drop_geometry()  # Eliminar la geometría adicional de 'bog', si es necesario
View(bog)
# Ejemplo de unión por columna 'id'
datos_actualizados <- st_join(datos_poligonos, bog, by = "valor") %>%
st_drop_geometry()  # Eliminar la geometría adicional de 'bog', si es necesario
datos_poligonos <- st_as_sf(datos_poligonos)
# Ejemplo de unión espacial
datos_actualizados <- st_join(datos_poligonos, bog, join = st_intersects)
# Guardar el resultado en una nueva variable o sobrescribir 'datos_poligonos' si deseas actualizarlo directamente
datos_poligonos <- datos_actualizados
View(datos_actualizados)
# Asegurarse de que la columna de geometría está correctamente identificada
st_geometry(datos_actualizados) <- datos_actualizados$geometry
View(datos_actualizados)
View(datos_poligonos)
View(datos_poligonos)
p = ggplot(data=datos_poligonos) + geom_sf(mapping = aes(fill=valor) , size=0.3 , col=NA)  +
scale_fill_manual(values=c("yellow","#FF9900","#FF6600","#CC0000","#990000"),
name="Valor mediano\n del metro cuadrado")
p
p <- ggplot(data = datos_poligonos) +
geom_sf(mapping = aes(fill = as.factor(valor)), size = 0.3, col = NA) +
scale_fill_manual(values = c("yellow", "#FF9900", "#FF6600", "#CC0000", "#990000"),
name = "Valor mediano\n del metro cuadrado")
p
p <- ggplot(data = datos_poligonos) +
geom_sf(mapping = aes(fill = as.factor(valor)), size = 0.3, col = NA) +
scale_fill_manual(values = c("yellow", "#FF9900", "#FF6600", "#CC0000", "#990000",
"blue", "green", "purple", "pink", "orange",
"brown", "gray", "black"),
name = "Valor mediano\n del metro cuadrado")
p
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
datos_poligonos <- st_buffer(st_as_sf(bog$geometry), 0)
# Convertir 'datos_poligonos' a sf si aún no lo es
datos_poligonos <- st_as_sf(datos_poligonos)
# Ejemplo de unión por columna 'id'
datos_actualizados <- st_join(datos_poligonos, bog, by = "valor") %>%
st_drop_geometry()  # Eliminar la geometría adicional de 'bog', si es necesario
# Guardar el resultado en una nueva variable o sobrescribir 'datos_poligonos' si deseas actualizarlo directamente
datos_poligonos <- datos_actualizados
datos_poligonos <- st_as_sf(datos_poligonos)
datos_poligonos <- st_as_sf(datos_poligonos)
# Convertir 'datos_poligonos' a sf si aún no lo es
datos_poligonos <- st_as_sf(datos_poligonos)
# Ejemplo de unión espacial
datos_actualizados <- st_join(datos_poligonos, bog, join = st_intersects)
# Guardar el resultado en una nueva variable o sobrescribir 'datos_poligonos' si deseas actualizarlo directamente
datos_poligonos <- datos_actualizados
View(datos_actualizados)
View(datos_poligonos)
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
datos_poligonos <- st_buffer(st_as_sf(bog$geometry), 0)
datos_poligonos <- st_as_sf(datos_poligonos)
View(datos_poligonos)
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
bog<- st_as_sf(db, coords = c("lng", "lat"),  crs = 4626)
opq(bbox = getbb("Bogotá Colombia"))
datos_poligonos <- st_buffer(st_as_sf(bog$geometry), 0)
View(datos_poligonos)
# Limpiar el entorno
rm(list = ls())
library(rio)
library(sf)
library(ggplot2)
library(pacman)
library(tidyverse)
library(rio)
library(viridis)
library(leaflet)
library(tmaptools)
library(tidycensus)
library(dplyr)
library(sf)
library(ggplot2)
library(readxl)
library(summarytools)
library(officer)
library(plotly)
library(tmaptools)
library(osmdata)
library(tidymodels)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
db <- import("9. Mapa_R.xlsx")
# Observamos la primera visualización
leaflet() %>%
addTiles() %>%
addCircles(lng = db$lng,
lat = db$lat)
## obtener la caja de coordenada que contiene el polígono de Bogotá
opq(bbox = getbb("Bogotá Colombia"))
## objeto osm
osm = opq(bbox = getbb("Bogotá Colombia")) %>%
add_osm_feature(key="amenity" , value="Estaciones")
class(osm)
## extraer Simple Features Collection
osm_sf = osm %>% osmdata_sf()
osm_sf
## Obtener un objeto sf
bus_station = osm_sf$osm_points %>% select(osm_id,amenity)
bus_station
class(osm)
## extraer Simple Features Collection
osm_sf = osm %>% osmdata_sf()
osm_sf
## Obtener un objeto sf
bus_station = osm_sf$osm_points %>% select(valor,amenity)
View(osm)
View(osm_sf)
bus_station
